"use strict";!function(u){var d;u.fn.actions=function(e){function n(){u(i.acrossClears).hide(),u(i.acrossQuestions).show(),u(i.allContainer).hide()}function t(){u(i.acrossClears).show(),u(i.acrossQuestions).hide(),u(i.actionContainer).toggleClass(i.selectedClass),u(i.allContainer).show(),u(i.counterContainer).hide()}function a(){u(i.acrossClears).hide(),u(i.acrossQuestions).hide(),u(i.allContainer).hide(),u(i.counterContainer).show()}function o(){a(),u(i.acrossInput).val(0),u(i.actionContainer).removeClass(i.selectedClass)}function s(e){e?n():a(),u(l).prop("checked",e).parent().parent().toggleClass(i.selectedClass,e)}function c(){var t=u(l).filter(":checked").length,e=u(".action-counter").data("actionsIcnt");u(i.counterContainer).html(interpolate(ngettext("%(sel)s of %(cnt)s selected","%(sel)s of %(cnt)s selected",t),{sel:t,cnt:e},!0)),u(i.allToggle).prop("checked",function(){var e;return t===l.length?(e=!0,n()):(e=!1,o()),e})}var i=u.extend({},u.fn.actions.defaults,e),l=u(this),r=!1;u(i.counterContainer).show(),u(this).filter(":checked").each(function(e){u(this).parent().parent().toggleClass(i.selectedClass),c(),1===u(i.acrossInput).val()&&t()}),u(i.allToggle).show().on("click",function(){s(u(this).prop("checked")),c()}),u("a",i.acrossQuestions).on("click",function(e){e.preventDefault(),u(i.acrossInput).val(1),t()}),u("a",i.acrossClears).on("click",function(e){e.preventDefault(),u(i.allToggle).prop("checked",!1),o(),s(0),c()}),d=null,u(l).on("click",function(e){e||(e=window.event);var t=e.target?e.target:e.srcElement;if(d&&u.data(d)!==u.data(t)&&!0===e.shiftKey){var n=!1;u(d).prop("checked",t.checked).parent().parent().toggleClass(i.selectedClass,t.checked),u(l).each(function(){u.data(this)!==u.data(d)&&u.data(this)!==u.data(t)||(n=!n),n&&u(this).prop("checked",t.checked).parent().parent().toggleClass(i.selectedClass,t.checked)})}u(t).parent().parent().toggleClass(i.selectedClass,t.checked),d=t,c()}),u("form#changelist-form table#result_list tr").on("change","td:gt(0) :input",function(){r=!0}),u('form#changelist-form button[name="index"]').on("click",function(e){if(r)return confirm(gettext("You have unsaved changes on individual editable fields. If you run an action, your unsaved changes will be lost."))}),u('form#changelist-form input[name="_save"]').on("click",function(e){var t=!1;if(u("select option:selected",i.actionContainer).each(function(){u(this).val()&&(t=!0)}),t)return r?confirm(gettext("You have selected an action, but you haven't saved your changes to individual fields yet. Please click OK to save. You'll need to re-run the action.")):confirm(gettext("You have selected an action, and you haven't made any changes on individual fields. You're probably looking for the Go button rather than the Save button."))})},u.fn.actions.defaults={actionContainer:"div.actions",counterContainer:"span.action-counter",allContainer:"div.actions span.all",acrossInput:"div.actions input.select-across",acrossQuestions:"div.actions span.question",acrossClears:"div.actions span.clear",allToggle:"#action-toggle",selectedClass:"selected"},u(document).ready(function(){var e=u("tr input.action-select");0<e.length&&e.actions()})}(django.jQuery);